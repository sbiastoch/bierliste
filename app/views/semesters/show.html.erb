<div class="container">
  <h1 class="<%= ' text-muted' unless @semester.active %>">
    <%= @semester.semester_long_name %>
  </h1>
  <p id="notice"><%= notice %></p>

    <strong>Abrechnungsbeginn:</strong>
    <%= @semester.start %>

    <strong>Abrechnungsende:</strong>
    <%= @semester.end %>
<!--
    <strong>Cash:</strong>
    <%= @semester.cash %>

    <strong>Bank:</strong>
    <%= @semester.bank %>
-->
  <table class="table table-striped table-bordered">
    <thead>
    <tr>
      <th>Beleg</th>
      <th>Datum</th>
      <th>Beschreibung</th>

      <% Semester.current.categories.all.each do |budget| %>
          <th>
            <%= budget.name %>
          </th>
      <% end %>

    </tr>
    <tr>
      <th><%= @semester.start %></th>
      <th></th>
      <th></th>

      <% Semester.current.categories.all.each do |budget| %>
          <th>
            <%= budget.amount %>€
          </th>
      <% end %>

    </tr>
    </thead>

    <tbody>
    <% Semester.current.receipts.all.each do |receipt| %>
        <tr>
          <td><%= receipt.code %></td>
          <td><%= receipt.date %></td>
          <td><%= receipt.description %></td>
          <% Semester.current.categories.all.each do |budget| %>
              <td><%= receipt.amount if receipt.category.id == budget.id %>&nbsp;</td>
          <% end %>
        </tr>
    <% end %>
    </tbody>
    <tfoot>

    <tr>
      <th><%= Date.today %></th>
      <th></th>
      <th></th>
      <% Semester.current.categories.all.each do |cat| %>
          <th>
            <%= (cat.amount.to_f - cat.receipts.all.sum(&:amount)) %> €
          </th>
      <% end %>
    </tr>
    </tfoot>
  </table>

  <%= link_to 'Edit', edit_semester_path(@semester) %> |
  <%= link_to 'Back', semesters_path %>
</div>